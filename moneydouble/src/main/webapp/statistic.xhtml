<?xml version="1.0"	encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:outputStylesheet library="css" name="moneydouble.css"/>

<h:head>
	<f:facet name="first">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	</f:facet>
	<link rel="shortcut icon" type="image/x-icon" href="#{resource['images/favicon.ico']}"/>
	<title>Statistic</title>
</h:head>
<h:body>
	<f:event listener="#{loginHandler.checkLoggedIn}" type="preRenderView" />
	<h:form id="navigation">
		<p:menubar>
			<p:menuitem>
			    <h:link outcome="/index.jsf">
			        <h:graphicImage name="images/logo.png" height="50px;" />
			    </h:link>
			</p:menuitem>
			<p:menuitem styleClass="navigation-menuitem" value="#{msg.home}" url="/index.jsf" />
			<p:menuitem styleClass="navigation-menuitem-selected" value="#{msg.statistic}" url="/statistic.jsf" />
			<p:menuitem styleClass="navigation-menuitem" value="#{msg.money}" url="/money.jsf" />
			
			<f:facet name="options">
	            <p:commandButton value="Logout" icon="ui-icon-extlink" action="#{loginHandler.logout()}"/>
	        </f:facet>
		</p:menubar>
	</h:form>
	
	<p:tabView orientation="left" style="background-color:#E3E3E3;">
		<p:tab title="Bet history">
			<p:dataTable var="zug" value="#{statisticHandler.spielzuege}"
				rowStyleClass="#{zug.guess eq zug.result ? 'win' : 'loss'}" reflow="true">
				<p:column headerText="Guess">
					<h:outputText value="#{zug.guess}" />
				</p:column>

				<p:column headerText="Result">
					<h:outputText value="#{zug.result}" />
				</p:column>

				<p:column headerText="Amount">
					<h:outputText value="#{zug.moneyAmount}" />
				</p:column>

				<p:column headerText="Timestamp">
					<h:outputText value="#{zug.timestamp}" />
				</p:column>
			</p:dataTable>
		</p:tab>
		<p:tab title="Distribution">
			<p:chart type="pie" model="#{statisticHandler.userPieModel}" style="width:400px;height:300px" />
			<p:chart type="pie" model="#{statisticHandler.resultPieModel}" style="width:400px;height:300px" />
		</p:tab>
		<p:tab title="Your profits">
			<p:chart type="line" model="#{statisticHandler.winningsLineModel}" style="height:300px;" responsive="true"/>
		</p:tab>
		
	</p:tabView>
</h:body>
</html>
